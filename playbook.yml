---
# copyright Utrecht University
# This playbook deploys a complete Matomo instance.

- name: Local checks
  hosts: localhost
  gather_facts: false
  pre_tasks:
    - name: Verify Ansible version meets requirements
      ansible.builtin.assert:
        that: "ansible_version.full is version('2.11', '>=')"
        msg: >
          "You must update Ansible to at least 2.11 to deploy Matomo."


- name: Provision Matomo server using Docker setup
  hosts: all
  become: true
  roles:
    - common
    - docker_compose
    - matomo_docker
